
(function(a){a.fn.serializeArrayAll=function(){var b=/\r?\n/g;return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).map(function(c,d){var e=jQuery(this).val();if(e==null){return e==null}else{if(this.type=="checkbox"&&this.checked==false){return{name:this.name,value:this.checked?this.value:""}}else{return jQuery.isArray(e)?jQuery.map(e,function(g,f){return{name:d.name,value:g.replace(b,"\r\n")}}):{name:d.name,value:e.replace(b,"\r\n")}}}}).get()};a(document).on("click",".single_add_to_cart_button:not(.disabled)",function(f){var c=a(this),b=c.closest("form.cart"),d=b.find('input:not([name="product_id"]), select, button, textarea').serializeArrayAll()||0;a.each(d,function(e,g){if(g.name=="add-to-cart"){g.name="product_id";g.value=b.find("input[name=variation_id]").val()||c.val()}});f.preventDefault();a(document.body).trigger("adding_to_cart",[c,d]);a.ajax({type:"POST",url:woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:d,beforeSend:function(e){c.removeClass("added").addClass("loading")},complete:function(e){c.addClass("added").removeClass("loading")},success:function(e){if(e.error&e.product_url){window.location=e.product_url;return}a(document.body).trigger("added_to_cart",[e.fragments,e.cart_hash,c])},});return false})})(jQuery);