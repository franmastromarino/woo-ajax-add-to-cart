!function(e){e.fn.serializeArrayAll=function(){var e=/\r?\n/g;return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).map(function(t,a){var n=jQuery(this).val();return null==n?null==n:"checkbox"==this.type&&!1===this.checked?{name:this.name,value:this.checked?this.value:""}:"radio"!==this.type?jQuery.isArray(n)?jQuery.map(n,function(t,n){return{name:a.name,value:t.replace(e,"\r\n")}}):{name:a.name,value:n.replace(e,"\r\n")}:this.checked?{name:this.name,value:this.checked?this.value:""}:void 0}).get()},e(document).on("click",".single_add_to_cart_button:not(.disabled)",function(t){var a=e(this),n=a.closest("form.cart"),r=n.find('input:not([name="product_id"]), select, button, textarea').serializeArrayAll()||0;return e.each(r,function(e,t){"add-to-cart"==t.name&&(t.name="product_id",t.value=n.find("input[name=variation_id]").val()||a.val())}),t.preventDefault(),e(document.body).trigger("adding_to_cart",[a,r]),e.ajax({type:"POST",url:woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:r,beforeSend:function(e){a.removeClass("added").addClass("loading")},complete:function(e){a.addClass("added").removeClass("loading")},success:function(t){if(t.error&&t.product_url){window.location=t.product_url;return}e(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,a])}}),!1})}(jQuery);
